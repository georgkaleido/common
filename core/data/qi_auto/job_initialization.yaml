apiVersion: batch/v1
kind: CronJob
metadata:
  name: qi-auto-initialization
spec:
  # Run twice a month (1st and 15th) at 3am
  schedule: "0 3 1,15 * *"
  jobTemplate:
    spec:
      template:
        spec:
          containers:
            - name: qi-auto-initialization
              image: eu.gcr.io/kaleido-train/trimap-qi-auto-initialization:v6
              imagePullPolicy: Always
              env:
                - name: DANNI_USER
                  valueFrom:
                    secretKeyRef:
                      name: auth-secrets
                      key: danni-user
                - name: DANNI_TOKEN
                  valueFrom:
                    secretKeyRef:
                      name: auth-secrets
                      key: danni-token
          restartPolicy: OnFailure
